# Java基础

> Java是由Sun Microstystems公司于1995年5月推出的程序设计语言。

## 特点和特性

<br>
<details>
<summary><b>Java特点：</b> 跨平台、面向对象、安全性、多线程、简单易用、可维护性高</summary>
<br>

|特点|描述|
|--|--|
|跨平台|Java可以不受计算机的硬件和操作系统的限制，而独立于平台。因为Java中有自带的JVM，它执行经过javac命令编译完成的java源代码所生成的class文件转换成机器码语言在平台上操作。|
|面向对象|万物皆对象，Java以对象为基本粒度。对象中包含属性和方法，对象的说明用属性来表达，方法用来操作对象。这样可以对应用程序进行解耦，提高代码的可扩展性和重用性。|
|安全性|<span class="font-red">语言级安全性：</span>Java的数据结构是完整的对象，这些封装过的数据类型具有安全性。<br><span class="font-red">编译时安全性：</span>编译时要进行Java语义和语法的检查，保证每个变量对应一个相应的值，编译后生成Java类。<br><span class="font-red">运行时安全性：</span>表示在运行Java类时要进行字节码校检器校检之后才可以运行。<br><span class="font-red">可执行代码安全性：</span>Java类在网络上使用时，对它的权限进行了设置，保证了被访问用户的安全性。|
|多线程|多线程是指允许一个应用程序同时存在两个或两个以上的线程，用于支持事务并发和多任务处理。<br>Java除了内置的多线程技术之外，还定义了一些类、方法等来建立和管理用户定义的多线程。|
|简单易用|就是指java源代码可以不用在特定环境下编写。|
|可维护性高|--|

</details>
<br>
<details>
<summary><b>四大特性：</b> 继承、封装、抽象、多态</summary>
<br>

|特性|描述|
|--|--|
|继承|继承要有一定的层次结构，还要具备一定的可传递性;<br>子类只能继承父类<span class="font-red">非私有化</span>的成员变量和方法<br>实行<span class="font-red">就近原则</span>，有局部变量优先使用局部变量，没有就使用子类成员变量，子类没有则使用父类成员变量。
|封装|将抽象出来的属性和方法写在一个类中就是封装，将不需要对外提供的内容隐藏起来，提供公共的访问方式。<br>封装就是包装的过程，但封装不是绝对的封装，如果其他程序要获取已经封装好的数据，就要通过程序指定的接口或方法才能获取。|
|多态|多态是同一个行为具有多个不同表现形式或形态的能力。<br>多态就是同一个接口，使用不同的实例而执行不同操作。<br>多态性是对象多种表现形式的体现。|
|抽象|就是对同一类事物共有的属性（特征）和方法（功能/行为）进行抽取、归纳、总结。<br>抽象类不能实例化为一个对象，就比如水果是苹果，香蕉，梨等一类事物抽象出来的。|

</details>

## 面向对象和面向过程

<span class="font-red">面向对象：</span>指的是将问题分解成一个一个步骤，对每个步骤进行相应的抽象，形成对象，然后通过互相调用，解决组合问题；
也就是说在进行面向对象编程的时候，要把属性、行为等封装成对象，然后基于这些对象的能力进行业务逻辑的实现。

<span class="font-red">面向过程：</span>指的是把问题分解成一个一个步骤，每个步骤用函数来实现，然后依次调用即可。

## 数据类型

> 变量就是申请内存来存储值。也就是说，当创建变量的时候，需要在内存中申请空间。内存管理系统根据变量的类型为变量分配存储空间，分配的空间只能用来储存该类型数据。因此，通过定义不同类型的变量，可以在内存中储存整数、小数或者字符。

<details>
<summary>Java 的两大数据类型：<b>内置数据类型、引用数据类型</b>。</summary>
<br>

|类型|描述|
|--|--|
|内置数据类型|byte、short、int、long、float、double、boolean、char|
|引用数据类型|引用类型指向一个对象，<span class="font-red">指向对象的变量是引用变量</span>。<br>对象、数组都是引用数据类型，所有引用类型的默认值都是null。|

|类型|占用存储空间|表示范围|
|--|--|--|
|byte|1字节|-2^7 ~ 2^7 - 1（-128 ~ 127）|
|short|2字节|-2^15 ~ 2^15 - 1（-32768 ~ 32767）|
|int|4字节|-2^31 ~ 2^31 - 1（-2147483648 ~ 2147483647）|
|long|8字节|-2^63 ~ 2^63 - 1|
|float|4字节|-3.403E38 ~ 3.403E38|
|double|8字节|-1.798E308 ~ 1.798E308|
|boolean|1字节|true、false|
|char|2字节|0 ~ 65535|

</details>

## 四大引用类型

> 从Java SE2开始，就提供了四种类型的引用：强引用、软引用、弱引用和虚引用。  

Java中提供这四种引用类型主要有两个目的：  
- 通过代码的方式决定某些对象的生命周期；  
- 有利于JVM进行垃圾回收。  

| 类别 | 回收机制 | 用途 | 生存时间 |
| --- | --- | --- | --- |
| 强引用 | 从不回收 | 对象状态 | JVM停止运行时|
| 软引用 | 内存不足时回收 | 缓存 | 内存不足 |
| 弱引用 | 对象不被引用时回收 | 缓存 | GC运行后 |
| 虚引用 | 对象被回收时 | 管理控制精确内存稳定性 | unknown |

## 泛型和类型擦除

> 泛型简单说就是能广泛适用的类型。
> 还有一种较为准确的说法就是为了<span class="font-red">参数化类型</span>，就是可以将类型当作参数传递给一个类或者是方法。

- 因为泛型可以使数据的类别像参数一样由外部传递进来，它提供了一种扩展能力，更符合抽象开发。
- 当具体的类型确定后，泛型又提供了一种类型检测的机制，只有相匹配的数据才能正常的赋值，否则编译器就不通过。
- 泛型提高了程序代码的可读性，不必要等到运行的时候才去强制转换。

泛型类中的类型参数与泛型方法中的类型参数是没有相应的联系的，<span class="font-red">泛型方法始终以自己定义的类型参数为准。</span>

### 通配符 ？

通配符的出现是为了指定泛型中的类型范围。
- <?>被称作无限定的通配符，会被转译为Object类型。
- <? extends T>被称作有上限的通配符，会被转译为T的类型。
- <? super T>被称作有下限的通配符。

### 类型擦除

> 泛型信息只存在于代码编译期间，在编译器编译生成字节码时，与泛型相关的信息会被擦除掉，专业术语叫做类型擦除。

在泛型类被类型擦除的时候，之前泛型类中的类型参数部分如果没有指定上限，如\<T\>则会被转译成普通的Object类型，如果指定了上限如\<T extends String\>则类型参数就被替换成类型上限。

泛型类或者泛型方法中，不接受8种基本数据类型如int、boolean等，而是需要使用它们的包装类Integer、Boolean等。

**为什么会有类型擦除？**

这是Java实现泛型的方式，也叫作<span class="font-red">伪泛型。</span>

Java的泛型在底层实现上使用了Object引用，编译器可以通过指定的泛型进行静态类型检查，在编译后又擦除为Object类型。
如果要实现真泛型的话，就需要修改JVM的源码，让虚拟机正确地读取和校验泛型信息，而之前的Java是没有这一概念的。
所以为了兼容旧程序，还需要为原本不支持泛型的API添加一套泛型API。


## 数据库

### 索引

>数据库索引，是数据库管理系统中一个排序的数据结构，以协助快速查询，更新数据库中表的数据。索引的实现通常使用B树和变种的B+树(mysql常用的索引就是B+树)

<details><summary>索引的优缺点</summary>

**优点**

- 通过创建索引,可以在查询的过程中,提高系统的性能  
- 通过创建唯一性索引,可以保证数据库表中每一行数据的唯一性  
- 在使用分组和排序子句进行数据检索时,可以减少查询中分组和排序的时间

**缺点**

- 创建索引和维护索引要耗费时间,而且时间随着数据量的增加而增大  
- 索引需要占用物理空间,如果要建立聚簇索引,所需要的空间会更大  
- 在对表中的数据进行增加删除和修改时需要耗费较多的时间,因为索引也要动态地维护

</details>

### 事务

>事务是指一系列逻辑上不可分割的SQL语句，事务有四大特性（ACID）：原子性、一致性、隔离性、持久性。

- <span class="font-red">原子性：</span>操作后的点要跟预先的点相同，要么全部执行成功，要么就不执行。

- <span class="font-red">一致性：</span>事务完成时数据保持一致性，处于一种有意义的状态，就比如转账，A用户转钱给B用户，如果A的钱减少了，而B的的余额却没有增加，那么我们认为此时数据不一致。

- <span class="font-red">隔离性：</span>即保证每一个事务能够看到的数据总是一致的，事物可以并发执行但是互不干扰。

- <span class="font-red">持久性：</span>当一个事务提交后这个数据库状态就发生了改变，比如写数据写到一半死机了，重启后数据库会根据日志进行回滚，最终将全部数据写入。

<details><summary>数据库三大范式</summary>

- 第一范式（1NF）：每一个分量必须是不可分的数据项。  
1、有主键，且主键不能为空。  
2、字段不能再分。

- 第二范式（2NF）：在范式一的基础上，且每一个非主属性完全函数依赖于主键。  
1、满足第一范式。  
2、表中的每一个非主属性，必须完全依赖于本表主键。  
3、只有当一个表中，主键由两个或以上的属性组成的时候，才会出现不符合第二范式的情况。

- 第三范式（3NF）：在第二范式的基础上，且消除传递依赖性。  
1、满足第二范式。  
2、所有的非主键列依赖于主键列。

</details>

### 常用SQL语句

```sql
// 查询
select * from table_name where age=30 and sex='男';
// 查询第1-10条的数据
select * from table_name limit 0,10;
// 分页，主键或唯一索引id
select * from table_name where id > (pageNo-1)*pageSize limit pageSize;
// 排序 order by 默认顺序，order by desc 逆序
select * from table_name where id > (pageNo-1)*pageSize order by id limit pageSize;

// 插入
insert into table_name(id, age, sex) values(1, 30, '男');
// 插入或替换
replace into table_name (id, age, sex) VALUES (1, 31, '男');
// 插入或更新
insert into table_name (id, age, sex) VALUES (1, 31, '男') on duplicate key update age=32, sex='女';
// 插入或忽略
insert ignore into table_name (id, age, sex) VALUES (1, 31, '男');
```
