# 数据库索引和事务

## 索引

>数据库索引,是数据库管理系统中一个排序的数据结构,以协助快速查询,更新数据库中表的数据.索引的实现通常使用B树和变种的B+树(mysql常用的索引就是B+树)

**优点**

1、通过创建索引,可以在查询的过程中,提高系统的性能  
2、通过创建唯一性索引,可以保证数据库表中每一行数据的唯一性  
3、在使用分组和排序子句进行数据检索时,可以减少查询中分组和排序的时间

**缺点**

1、创建索引和维护索引要耗费时间,而且时间随着数据量的增加而增大  
2、索引需要占用物理空间,如果要建立聚簇索引,所需要的空间会更大  
3、在对表中的数据进行增加删除和修改时需要耗费较多的时间,因为索引也要动态地维护

## 事务

>事务是指一系列逻辑上不可分割的SQL语句，事务有四大特性（ACID）：**原子性、一致性、隔离性、持久性。**

**原子性**：操作后的点要跟预先的点相同，要么全部执行成功，要么就不执行。

**一致性**：事务完成时数据保持一致性，处于一种有意义的状态，就比如转账，A用户转钱给B用户，如果A的钱减少了，而B的的余额却没有增加，那么我们认为此时数据不一致。

**隔离性**：即保证每一个事务能够看到的数据总是一致的，事物可以并发执行但是互不干扰。

**持久性**：当一个事务提交后这个数据库状态就发生了改变，比如写数据写到一半死机了，重启后数据库会根据日志进行回滚，最终将全部数据写入。

数据库三大范式定义与理解：  
**第一范式（1NF）：每一个分量必须是不可分的数据项。**  
1、有主键，且主键不能为空。  
2、字段不能再分。

**第二范式（2NF）：在范式一的基础上，且每一个非主属性完全函数依赖于主键。**  
1、满足第一范式。  
2、表中的每一个非主属性，必须完全依赖于本表主键。  
3、只有当一个表中，主键由两个或以上的属性组成的时候，才会出现不符合第二范式的情况。

**第三范式（3NF）：在第二范式的基础上，且消除传递依赖性。**  
1、满足第二范式。  
2、所有的非主键列依赖于主键列。